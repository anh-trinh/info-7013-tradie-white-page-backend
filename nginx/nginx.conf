server {
    listen 80;
    server_name localhost;

    location ~ ^/(search|tradie|login|register|admin/login|$) {
        proxy_pass http://host.docker.internal:8000;
        proxy_set_header Host $host;
    }
    location /api/accounts/ {
        proxy_pass http://account-service:8000/api/accounts/;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
    }
    location /api/admin/accounts/ {
        proxy_pass http://account-service:8000/api/admin/accounts/;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
    }

    location ~ ^/(dashboard|tradie-dashboard|admin) {
        proxy_pass http://host.docker.internal:5173;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection "upgrade";
    }

    # location /api/accounts/ {
    #     proxy_pass http://account-service:80/;
    # }
    # location /api/tradies/ {
    #     proxy_pass http://tradie-service:80/;
    # }
    location ^~ /api/bookings {
        proxy_pass http://booking-service:8000;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
    }
    location ^~ /api/quotes {
    location /api/reviews/ {
        proxy_pass http://review-service:3000/api/reviews/;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
    }
    location /api/admin/reviews/ {
        proxy_pass http://review-service:3000/api/admin/reviews/;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
    }
        proxy_pass http://review-service:3001;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
    }
    location ^~ /api/notifications {
        proxy_pass http://notification-service:8000;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
    }
    # location /api/admin/ {
    #     proxy_pass http://admin-service:80/;
    # }
}
